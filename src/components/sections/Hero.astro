---
import Button from '../ui/Button.astro'

const { 
  headline, 
  lead, 
  image, 
  imageAlt, 
  videoWebm,
  videoMp4,
  videoPoster,
  buttonLabel, 
  buttonHref, 
  showPartners = false 
} = Astro.props

const hasVideo = videoWebm || videoMp4
---

<section class="group">
  <div class="relative min-h-[82vh] flex items-end pt-40 before:absolute before:inset-0 before:bg-black/55 before:mix-blend-multiply before:z-10">
    {hasVideo ? (
      <video
        autoplay
        muted
        loop
        playsinline
        poster={videoPoster}
        preload="metadata"
        class="absolute z-0 w-full h-full object-cover object-center"
        aria-label={imageAlt || 'Background video'}
      >
        {videoWebm && (
          <source src={videoWebm} type="video/webm" />
        )}
        {videoMp4 && (
          <source src={videoMp4} type="video/mp4" />
        )}
        {/* Fallback image for browsers that don't support video */}
        {image && (
          <img
            src={image}
            alt={imageAlt}
            class="absolute z-0 w-full h-full object-cover object-center"
          />
        )}
      </video>
    ) : (
      <picture class="absolute z-0 w-full h-full object-cover object-top">
        <source
          srcset={`${image}?w=640&h=685&fit=crop`}
          media="(max-width: 640px)"
        />
        <source
          srcset={`${image}?w=1024&h=685&fit=crop`}
          media="(max-width: 1024px)"
        />
        <source
          srcset={`${image}?w=1440&h=685&fit=crop`}
          media="(max-width: 1440px)"
        />
        <img
          src={`${image}?w=1440&h=685&fit=crop`}
          alt={imageAlt}
          class="absolute z-0 w-full h-full object-cover object-top"
        />
      </picture>
    )}

    <div class="relative z-20 w-full pt-10">
      <div class="max-w-[624px] mx-auto mb-28 px-6 flex flex-col gap-y-8 justify-center items-center">
        <div class="max-w-[624px] text-center">
          <h1 class="text-white text-3xl md:text-5xl leading-[110%] -tracking-[1.92px] font-adamina mb-4">
            {headline}
          </h1>

          {lead && (
            <p class="text-white leading-[150%] -tracking-[0.32px]">
              {lead}
            </p>
          )}
        </div>

        {buttonLabel && buttonHref && (
          <Button label={buttonLabel} href={buttonHref} variant="primary" classes="cta-button" />
        )}
      </div>

      {showPartners && (
        <div class="max-w-[1016px] mx-auto px-6">
          <slot name="partners" />
        </div>
      )}
    </div>
  </div>
</section>

