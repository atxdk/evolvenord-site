---
import { getCollection } from 'astro:content'
import BaseLayout from '../../layouts/BaseLayout.astro'

export async function getStaticPaths() {
  const caseStudies = await getCollection('case-studies')
  return caseStudies.map((caseStudy) => ({
    params: { slug: caseStudy.slug },
    props: { caseStudy },
  }))
}

const { caseStudy } = Astro.props
const { Content } = await caseStudy.render()
---

<BaseLayout
  title={`${caseStudy.data.title} - Evolvenord Case Studies`}
  description={caseStudy.data.description}
  image={caseStudy.data.coverImage}
>
  <article class="container mx-auto px-6 py-32 max-w-4xl">
    <header class="mb-12">
      {caseStudy.data.coverImage && (
        <img
          src={caseStudy.data.coverImage}
          alt={caseStudy.data.title}
          class="w-full h-96 object-cover rounded-lg mb-8"
        />
      )}
      
      <div class="flex items-center gap-3 mb-4">
        <span class="px-4 py-2 bg-primary/10 text-primary rounded-full">
          {caseStudy.data.industry}
        </span>
        <span class="opacity-65">{caseStudy.data.client}</span>
      </div>

      <h1 class="text-4xl md:text-6xl font-adamina mb-6">
        {caseStudy.data.title}
      </h1>

      <div class="grid md:grid-cols-2 gap-8 p-6 bg-gray-50 rounded-lg mb-8">
        <div>
          <h3 class="font-medium mb-2">Services</h3>
          <div class="flex flex-wrap gap-2">
            {caseStudy.data.services.map((service) => (
              <span class="text-sm px-3 py-1 bg-white rounded-full">
                {service}
              </span>
            ))}
          </div>
        </div>
        <div>
          <h3 class="font-medium mb-2">Results</h3>
          <p class="text-primary font-medium">{caseStudy.data.results}</p>
        </div>
      </div>
    </header>

    <div class="prose prose-lg max-w-none">
      <Content />
    </div>

    <footer class="mt-16 pt-8 border-t border-gray-200">
      <a href="/case-studies" class="text-primary hover:underline">‚Üê Back to Case Studies</a>
    </footer>
  </article>
</BaseLayout>

